{
  "actions": {
    "createFile": {
      "description": "Create an empty file in Google Drive",
      "input": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "mimeType": { "description": "The media type of the file", "minLength": 1, "type": "string" },
            "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
            "parentId": {
              "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
              "minLength": 1,
              "type": "string"
            }
          },
          "required": ["name", "mimeType"],
          "type": "object"
        }
      },
      "output": {
        "schema": {
          "additionalProperties": false,
          "description": "The file created in Google Drive",
          "properties": {
            "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
            "mimeType": { "description": "The media type of the file", "minLength": 1, "type": "string" },
            "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
            "parentId": {
              "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
              "minLength": 1,
              "type": "string"
            },
            "path": {
              "description": "An array of the path's components sorted by level (root to leaf)",
              "items": {
                "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
                "minLength": 1,
                "type": "string"
              },
              "type": "array"
            },
            "size": { "description": "The size in bytes of the file", "minimum": 0, "type": "number" }
          },
          "required": ["id", "name", "mimeType", "size", "path"],
          "type": "object"
        }
      },
      "title": "Create File"
    },
    "deleteFile": {
      "description": "Deletes a file in Google Drive",
      "input": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" }
          },
          "required": ["id"],
          "type": "object"
        }
      },
      "output": { "schema": { "additionalProperties": false, "properties": {}, "type": "object" } },
      "title": "Delete File"
    },
    "downloadFileData": {
      "description": "Download data from a file in Google Drive",
      "input": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "id": {
              "description": "The ID of the Google Drive file whose content will be downloaded",
              "minLength": 1,
              "type": "string"
            },
            "index": { "description": "Indicates if the file is to be indexed or not", "type": "boolean" }
          },
          "required": ["id", "index"],
          "type": "object"
        }
      },
      "output": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "bpFileId": {
              "description": "The Botpress file ID corresponding to the file that was uploaded from Google Drive to the Files API",
              "minLength": 1,
              "type": "string"
            }
          },
          "required": ["bpFileId"],
          "type": "object"
        }
      },
      "title": "Download file data"
    },
    "listFiles": {
      "description": "List files in Google Drive",
      "input": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "nextToken": { "description": "The token to use to get the next page of results", "type": "string" }
          },
          "type": "object"
        }
      },
      "output": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "items": {
              "description": "The list of items listed in Google Drive. Results may be paginated. If set, use nextToken to get additional results",
              "items": {
                "additionalProperties": false,
                "properties": {
                  "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
                  "mimeType": { "description": "The media type of the file", "minLength": 1, "type": "string" },
                  "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
                  "parentId": {
                    "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
                    "minLength": 1,
                    "type": "string"
                  },
                  "path": {
                    "description": "An array of the path's components sorted by level (root to leaf)",
                    "items": {
                      "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
                      "minLength": 1,
                      "type": "string"
                    },
                    "type": "array"
                  },
                  "size": { "description": "The size in bytes of the file", "minimum": 0, "type": "number" }
                },
                "required": ["id", "name", "mimeType", "size", "path"],
                "type": "object"
              },
              "type": "array"
            },
            "meta": {
              "additionalProperties": false,
              "properties": {
                "nextToken": {
                  "description": "The token to pass as input to the next call of the list action to list additional items",
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "required": ["items", "meta"],
          "type": "object"
        }
      },
      "title": "List Files"
    },
    "listFolders": {
      "description": "List folders in Google Drive",
      "input": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "nextToken": { "description": "The token to use to get the next page of results", "type": "string" }
          },
          "type": "object"
        }
      },
      "output": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "items": {
              "description": "The list of items listed in Google Drive. Results may be paginated. If set, use nextToken to get additional results",
              "items": {
                "additionalProperties": false,
                "properties": {
                  "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
                  "mimeType": { "const": "application/vnd.google-apps.folder", "type": "string" },
                  "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
                  "parentId": {
                    "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
                    "minLength": 1,
                    "type": "string"
                  },
                  "path": {
                    "description": "An array of the path's components sorted by level (root to leaf)",
                    "items": {
                      "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
                      "minLength": 1,
                      "type": "string"
                    },
                    "type": "array"
                  }
                },
                "required": ["id", "name", "mimeType", "path"],
                "type": "object"
              },
              "type": "array"
            },
            "meta": {
              "additionalProperties": false,
              "properties": {
                "nextToken": {
                  "description": "The token to pass as input to the next call of the list action to list additional items",
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "required": ["items", "meta"],
          "type": "object"
        }
      },
      "title": "List folders"
    },
    "readFile": {
      "description": "Read a file's metadata in a Google Drive",
      "input": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" }
          },
          "required": ["id"],
          "type": "object"
        }
      },
      "output": {
        "schema": {
          "additionalProperties": false,
          "description": "The file read from Google Drive",
          "properties": {
            "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
            "mimeType": { "description": "The media type of the file", "minLength": 1, "type": "string" },
            "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
            "parentId": {
              "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
              "minLength": 1,
              "type": "string"
            },
            "path": {
              "description": "An array of the path's components sorted by level (root to leaf)",
              "items": {
                "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
                "minLength": 1,
                "type": "string"
              },
              "type": "array"
            },
            "size": { "description": "The size in bytes of the file", "minimum": 0, "type": "number" }
          },
          "required": ["id", "name", "mimeType", "size", "path"],
          "type": "object"
        }
      },
      "title": "Read File"
    },
    "syncChannels": {
      "description": "Sync channels for file change subscriptions",
      "input": { "schema": { "additionalProperties": false, "properties": {}, "type": "object" } },
      "output": { "schema": { "additionalProperties": false, "properties": {}, "type": "object" } },
      "title": "Sync Channels"
    },
    "updateFile": {
      "description": "Update a file's metadata in Google Drive",
      "input": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
            "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
            "parentId": {
              "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
              "minLength": 1,
              "type": "string"
            }
          },
          "required": ["id", "name"],
          "type": "object"
        }
      },
      "output": {
        "schema": {
          "additionalProperties": false,
          "description": "The file updated in Google Drive",
          "properties": {
            "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
            "mimeType": { "description": "The media type of the file", "minLength": 1, "type": "string" },
            "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
            "parentId": {
              "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
              "minLength": 1,
              "type": "string"
            },
            "path": {
              "description": "An array of the path's components sorted by level (root to leaf)",
              "items": {
                "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
                "minLength": 1,
                "type": "string"
              },
              "type": "array"
            },
            "size": { "description": "The size in bytes of the file", "minimum": 0, "type": "number" }
          },
          "required": ["id", "name", "mimeType", "size", "path"],
          "type": "object"
        }
      },
      "title": "Update File"
    },
    "uploadFileData": {
      "description": "Upload data to a file in Google Drive",
      "input": {
        "schema": {
          "additionalProperties": false,
          "properties": {
            "id": { "minLength": 1, "type": "string" },
            "mimeType": {
              "description": "Media type of the uploaded content. This will override any previously set media type",
              "minLength": 1,
              "type": "string"
            },
            "url": {
              "description": "The URL used to access the file whose content will be uploaded to Google Drive",
              "minLength": 1,
              "type": "string"
            }
          },
          "required": ["id", "url"],
          "type": "object"
        }
      },
      "output": { "schema": { "additionalProperties": false, "properties": {}, "type": "object" } },
      "title": "Upload file data"
    }
  },
  "description": "Access and manage your Google Drive files from your bot.",
  "events": {
    "fileCreated": {
      "description": "Triggered when a file is created in Google Drive",
      "schema": {
        "additionalProperties": false,
        "properties": {
          "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
          "mimeType": { "description": "The media type of the file", "minLength": 1, "type": "string" },
          "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
          "parentId": {
            "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
            "minLength": 1,
            "type": "string"
          },
          "path": {
            "description": "An array of the path's components sorted by level (root to leaf)",
            "items": {
              "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
              "minLength": 1,
              "type": "string"
            },
            "type": "array"
          },
          "size": { "description": "The size in bytes of the file", "minimum": 0, "type": "number" }
        },
        "required": ["id", "name", "mimeType", "size", "path"],
        "type": "object"
      },
      "title": "File Created"
    },
    "fileDeleted": {
      "description": "Triggered when a file is deleted in Google Drive",
      "schema": {
        "additionalProperties": false,
        "properties": { "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" } },
        "required": ["id"],
        "type": "object"
      },
      "title": "File Deleted"
    },
    "folderCreated": {
      "description": "Triggered when a folder is created in Google Drive",
      "schema": {
        "additionalProperties": false,
        "properties": {
          "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
          "mimeType": { "const": "application/vnd.google-apps.folder", "type": "string" },
          "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
          "parentId": {
            "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
            "minLength": 1,
            "type": "string"
          },
          "path": {
            "description": "An array of the path's components sorted by level (root to leaf)",
            "items": {
              "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
              "minLength": 1,
              "type": "string"
            },
            "type": "array"
          }
        },
        "required": ["id", "name", "mimeType", "path"],
        "type": "object"
      },
      "title": "Folder Created"
    },
    "folderDeleted": {
      "description": "Triggered when a folder is deleted in Google Drive",
      "schema": {
        "additionalProperties": false,
        "properties": { "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" } },
        "required": ["id"],
        "type": "object"
      },
      "title": "Folder Deleted"
    }
  },
  "interfaces": {},
  "name": "googledrive",
  "states": {
    "configuration": {
      "schema": {
        "additionalProperties": false,
        "properties": {
          "refreshToken": {
            "description": "The refresh token to use to authenticate with Google. It gets exchanged for a bearer token",
            "type": "string",
            "x-zui": { "title": "Refresh token" }
          }
        },
        "required": ["refreshToken"],
        "type": "object"
      },
      "type": "integration"
    },
    "filesCache": {
      "schema": {
        "additionalProperties": false,
        "properties": {
          "filesCache": {
            "additionalProperties": {
              "anyOf": [
                {
                  "additionalProperties": false,
                  "properties": {
                    "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
                    "mimeType": { "description": "The media type of the file", "minLength": 1, "type": "string" },
                    "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
                    "parentId": {
                      "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
                      "minLength": 1,
                      "type": "string"
                    },
                    "size": { "description": "The size in bytes of the file", "minimum": 0, "type": "number" },
                    "type": { "const": "normal", "type": "string" }
                  },
                  "required": ["id", "name", "mimeType", "size", "type"],
                  "type": "object"
                },
                {
                  "additionalProperties": false,
                  "properties": {
                    "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
                    "mimeType": { "const": "application/vnd.google-apps.folder", "type": "string" },
                    "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
                    "parentId": {
                      "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
                      "minLength": 1,
                      "type": "string"
                    },
                    "type": { "const": "folder", "type": "string" }
                  },
                  "required": ["id", "name", "mimeType", "type"],
                  "type": "object"
                },
                {
                  "additionalProperties": false,
                  "properties": {
                    "id": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
                    "mimeType": { "const": "application/vnd.google-apps.shortcut", "type": "string" },
                    "name": { "description": "The name of the file", "minLength": 1, "type": "string" },
                    "parentId": {
                      "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent",
                      "minLength": 1,
                      "type": "string"
                    },
                    "type": { "const": "shortcut", "type": "string" }
                  },
                  "required": ["id", "name", "mimeType", "type"],
                  "type": "object"
                }
              ]
            },
            "description": "Map of known files",
            "type": "object",
            "x-zui": { "title": "Files cache" }
          }
        },
        "required": ["filesCache"],
        "type": "object"
      },
      "type": "integration"
    },
    "filesChannelsCache": {
      "schema": {
        "additionalProperties": false,
        "properties": {
          "filesChannelsCache": {
            "additionalProperties": {
              "additionalProperties": false,
              "properties": {
                "fileId": { "description": "The ID of the Google Drive file", "minLength": 1, "type": "string" },
                "id": { "description": "The ID of the channel", "minLength": 1, "type": "string" },
                "resourceId": {
                  "description": "The ID of the watched resource (different from the file ID)",
                  "minLength": 1,
                  "type": "string"
                }
              },
              "required": ["id", "resourceId", "fileId"],
              "type": "object"
            },
            "description": "Serialized set of channels for file change subscriptions",
            "type": "object",
            "x-zui": { "title": "Files change subscription channels" }
          }
        },
        "required": ["filesChannelsCache"],
        "type": "object"
      },
      "type": "integration"
    }
  },
  "title": "Google Drive",
  "version": "0.0.4"
}

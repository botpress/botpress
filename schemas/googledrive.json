{
  "name": "googledrive",
  "version": "0.0.4",
  "title": "Google Drive",
  "description": "Access and manage your Google Drive files from your bot.",
  "events": {
    "fileCreated": {
      "title": "File Created",
      "description": "Triggered when a file is created in Google Drive",
      "schema": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1,
            "description": "The ID of the Google Drive file"
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "description": "The name of the file"
          },
          "parentId": {
            "type": "string",
            "minLength": 1,

            "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
          },
          "mimeType": {
            "type": "string",
            "minLength": 1,
            "description": "The media type of the file"
          },
          "size": {
            "type": "number",
            "minimum": 0,
            "description": "The size in bytes of the file"
          },
          "path": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1,
              "description": "A component of the path of the file. It corresponds to the name of one of it's parents."
            },
            "description": "An array of the path's components sorted by level (root to leaf)"
          }
        },
        "required": ["id", "name", "mimeType", "size", "path"],
        "additionalProperties": false
      }
    },
    "fileDeleted": {
      "title": "File Deleted",
      "description": "Triggered when a file is deleted in Google Drive",
      "schema": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1,
            "description": "The ID of the Google Drive file"
          }
        },
        "required": ["id"],
        "additionalProperties": false
      }
    },
    "folderCreated": {
      "title": "Folder Created",
      "description": "Triggered when a folder is created in Google Drive",
      "schema": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1,
            "description": "The ID of the Google Drive file"
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "description": "The name of the file"
          },
          "parentId": {
            "type": "string",
            "minLength": 1,

            "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
          },
          "mimeType": {
            "type": "string",
            "const": "application/vnd.google-apps.folder"
          },
          "path": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1,
              "description": "A component of the path of the file. It corresponds to the name of one of it's parents."
            },
            "description": "An array of the path's components sorted by level (root to leaf)"
          }
        },
        "required": ["id", "name", "mimeType", "path"],
        "additionalProperties": false
      }
    },
    "folderDeleted": {
      "title": "Folder Deleted",
      "description": "Triggered when a folder is deleted in Google Drive",
      "schema": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1,
            "description": "The ID of the Google Drive file"
          }
        },
        "required": ["id"],
        "additionalProperties": false
      }
    }
  },
  "actions": {
    "listFiles": {
      "title": "List Files",
      "description": "List files in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "nextToken": {
              "type": "string",

              "description": "The token to use to get the next page of results"
            }
          },
          "additionalProperties": false
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {
            "items": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "minLength": 1,
                    "description": "The ID of the Google Drive file"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "description": "The name of the file"
                  },
                  "parentId": {
                    "type": "string",
                    "minLength": 1,

                    "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
                  },
                  "mimeType": {
                    "type": "string",
                    "minLength": 1,
                    "description": "The media type of the file"
                  },
                  "size": {
                    "type": "number",
                    "minimum": 0,
                    "description": "The size in bytes of the file"
                  },
                  "path": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "minLength": 1,
                      "description": "A component of the path of the file. It corresponds to the name of one of it's parents."
                    },
                    "description": "An array of the path's components sorted by level (root to leaf)"
                  }
                },
                "required": ["id", "name", "mimeType", "size", "path"],
                "additionalProperties": false
              },
              "description": "The list of items listed in Google Drive. Results may be paginated. If set, use nextToken to get additional results"
            },
            "meta": {
              "type": "object",
              "properties": {
                "nextToken": {
                  "type": "string",

                  "description": "The token to pass as input to the next call of the list action to list additional items"
                }
              },
              "additionalProperties": false
            }
          },
          "required": ["items", "meta"],
          "additionalProperties": false
        }
      }
    },
    "listFolders": {
      "title": "List folders",
      "description": "List folders in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "nextToken": {
              "type": "string",

              "description": "The token to use to get the next page of results"
            }
          },
          "additionalProperties": false
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {
            "items": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "minLength": 1,
                    "description": "The ID of the Google Drive file"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "description": "The name of the file"
                  },
                  "parentId": {
                    "type": "string",
                    "minLength": 1,

                    "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
                  },
                  "mimeType": {
                    "type": "string",
                    "const": "application/vnd.google-apps.folder"
                  },
                  "path": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "minLength": 1,
                      "description": "A component of the path of the file. It corresponds to the name of one of it's parents."
                    },
                    "description": "An array of the path's components sorted by level (root to leaf)"
                  }
                },
                "required": ["id", "name", "mimeType", "path"],
                "additionalProperties": false
              },
              "description": "The list of items listed in Google Drive. Results may be paginated. If set, use nextToken to get additional results"
            },
            "meta": {
              "type": "object",
              "properties": {
                "nextToken": {
                  "type": "string",

                  "description": "The token to pass as input to the next call of the list action to list additional items"
                }
              },
              "additionalProperties": false
            }
          },
          "required": ["items", "meta"],
          "additionalProperties": false
        }
      }
    },
    "createFile": {
      "title": "Create File",
      "description": "Create an empty file in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "minLength": 1,
              "description": "The name of the file"
            },
            "parentId": {
              "type": "string",
              "minLength": 1,

              "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
            },
            "mimeType": {
              "type": "string",
              "minLength": 1,
              "description": "The media type of the file"
            }
          },
          "required": ["name", "mimeType"],
          "additionalProperties": false
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "minLength": 1,
              "description": "The ID of the Google Drive file"
            },
            "name": {
              "type": "string",
              "minLength": 1,
              "description": "The name of the file"
            },
            "parentId": {
              "type": "string",
              "minLength": 1,

              "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
            },
            "mimeType": {
              "type": "string",
              "minLength": 1,
              "description": "The media type of the file"
            },
            "size": {
              "type": "number",
              "minimum": 0,
              "description": "The size in bytes of the file"
            },
            "path": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1,
                "description": "A component of the path of the file. It corresponds to the name of one of it's parents."
              },
              "description": "An array of the path's components sorted by level (root to leaf)"
            }
          },
          "required": ["id", "name", "mimeType", "size", "path"],
          "additionalProperties": false,
          "description": "The file created in Google Drive"
        }
      }
    },
    "readFile": {
      "title": "Read File",
      "description": "Read a file's metadata in a Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "minLength": 1,
              "description": "The ID of the Google Drive file"
            }
          },
          "required": ["id"],
          "additionalProperties": false
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "minLength": 1,
              "description": "The ID of the Google Drive file"
            },
            "name": {
              "type": "string",
              "minLength": 1,
              "description": "The name of the file"
            },
            "parentId": {
              "type": "string",
              "minLength": 1,

              "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
            },
            "mimeType": {
              "type": "string",
              "minLength": 1,
              "description": "The media type of the file"
            },
            "size": {
              "type": "number",
              "minimum": 0,
              "description": "The size in bytes of the file"
            },
            "path": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1,
                "description": "A component of the path of the file. It corresponds to the name of one of it's parents."
              },
              "description": "An array of the path's components sorted by level (root to leaf)"
            }
          },
          "required": ["id", "name", "mimeType", "size", "path"],
          "additionalProperties": false,
          "description": "The file read from Google Drive"
        }
      }
    },
    "updateFile": {
      "title": "Update File",
      "description": "Update a file's metadata in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "minLength": 1,
              "description": "The ID of the Google Drive file"
            },
            "name": {
              "type": "string",
              "minLength": 1,
              "description": "The name of the file"
            },
            "parentId": {
              "type": "string",
              "minLength": 1,

              "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
            }
          },
          "required": ["id", "name"],
          "additionalProperties": false
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "minLength": 1,
              "description": "The ID of the Google Drive file"
            },
            "name": {
              "type": "string",
              "minLength": 1,
              "description": "The name of the file"
            },
            "parentId": {
              "type": "string",
              "minLength": 1,

              "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
            },
            "mimeType": {
              "type": "string",
              "minLength": 1,
              "description": "The media type of the file"
            },
            "size": {
              "type": "number",
              "minimum": 0,
              "description": "The size in bytes of the file"
            },
            "path": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1,
                "description": "A component of the path of the file. It corresponds to the name of one of it's parents."
              },
              "description": "An array of the path's components sorted by level (root to leaf)"
            }
          },
          "required": ["id", "name", "mimeType", "size", "path"],
          "additionalProperties": false,
          "description": "The file updated in Google Drive"
        }
      }
    },
    "deleteFile": {
      "title": "Delete File",
      "description": "Deletes a file in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "minLength": 1,
              "description": "The ID of the Google Drive file"
            }
          },
          "required": ["id"],
          "additionalProperties": false
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {},
          "additionalProperties": false
        }
      }
    },
    "uploadFileData": {
      "title": "Upload file data",
      "description": "Upload data to a file in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "minLength": 1
            },
            "url": {
              "type": "string",
              "minLength": 1,
              "description": "The URL used to access the file whose content will be uploaded to Google Drive"
            },
            "mimeType": {
              "type": "string",
              "minLength": 1,

              "description": "Media type of the uploaded content. This will override any previously set media type"
            }
          },
          "required": ["id", "url"],
          "additionalProperties": false
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {},
          "additionalProperties": false
        }
      }
    },
    "downloadFileData": {
      "title": "Download file data",
      "description": "Download data from a file in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "minLength": 1,
              "description": "The ID of the Google Drive file whose content will be downloaded"
            },
            "index": {
              "type": "boolean",
              "description": "Indicates if the file is to be indexed or not"
            }
          },
          "required": ["id", "index"],
          "additionalProperties": false
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {
            "bpFileId": {
              "type": "string",
              "minLength": 1,
              "description": "The Botpress file ID corresponding to the file that was uploaded from Google Drive to the Files API"
            }
          },
          "required": ["bpFileId"],
          "additionalProperties": false
        }
      }
    },
    "syncChannels": {
      "title": "Sync Channels",
      "description": "Sync channels for file change subscriptions",
      "input": {
        "schema": {
          "type": "object",
          "properties": {},
          "additionalProperties": false
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {},
          "additionalProperties": false
        }
      }
    }
  },
  "states": {
    "configuration": {
      "type": "integration",
      "schema": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "The refresh token to use to authenticate with Google. It gets exchanged for a bearer token",
            "x-zui": {
              "title": "Refresh token"
            }
          }
        },
        "required": ["refreshToken"],
        "additionalProperties": false
      }
    },
    "filesCache": {
      "type": "integration",
      "schema": {
        "type": "object",
        "properties": {
          "filesCache": {
            "type": "object",
            "additionalProperties": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "minLength": 1,
                      "description": "The ID of the Google Drive file"
                    },
                    "name": {
                      "type": "string",
                      "minLength": 1,
                      "description": "The name of the file"
                    },
                    "parentId": {
                      "type": "string",
                      "minLength": 1,

                      "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
                    },
                    "mimeType": {
                      "type": "string",
                      "minLength": 1,
                      "description": "The media type of the file"
                    },
                    "size": {
                      "type": "number",
                      "minimum": 0,
                      "description": "The size in bytes of the file"
                    },
                    "type": {
                      "type": "string",
                      "const": "normal"
                    }
                  },
                  "required": ["id", "name", "mimeType", "size", "type"],
                  "additionalProperties": false
                },
                {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "minLength": 1,
                      "description": "The ID of the Google Drive file"
                    },
                    "name": {
                      "type": "string",
                      "minLength": 1,
                      "description": "The name of the file"
                    },
                    "parentId": {
                      "type": "string",
                      "minLength": 1,

                      "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
                    },
                    "mimeType": {
                      "type": "string",
                      "const": "application/vnd.google-apps.folder"
                    },
                    "type": {
                      "type": "string",
                      "const": "folder"
                    }
                  },
                  "required": ["id", "name", "mimeType", "type"],
                  "additionalProperties": false
                },
                {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "minLength": 1,
                      "description": "The ID of the Google Drive file"
                    },
                    "name": {
                      "type": "string",
                      "minLength": 1,
                      "description": "The name of the file"
                    },
                    "parentId": {
                      "type": "string",
                      "minLength": 1,

                      "description": "The ID of the file that is the parent of this file. If not set, 'My Drive' is the parent"
                    },
                    "mimeType": {
                      "type": "string",
                      "const": "application/vnd.google-apps.shortcut"
                    },
                    "type": {
                      "type": "string",
                      "const": "shortcut"
                    }
                  },
                  "required": ["id", "name", "mimeType", "type"],
                  "additionalProperties": false
                }
              ]
            },
            "description": "Map of known files",
            "x-zui": {
              "title": "Files cache"
            }
          }
        },
        "required": ["filesCache"],
        "additionalProperties": false
      }
    },
    "filesChannelsCache": {
      "type": "integration",
      "schema": {
        "type": "object",
        "properties": {
          "filesChannelsCache": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "minLength": 1,
                  "description": "The ID of the channel"
                },
                "resourceId": {
                  "type": "string",
                  "minLength": 1,
                  "description": "The ID of the watched resource (different from the file ID)"
                },
                "fileId": {
                  "type": "string",
                  "minLength": 1,
                  "description": "The ID of the Google Drive file"
                }
              },
              "required": ["id", "resourceId", "fileId"],
              "additionalProperties": false
            },
            "description": "Serialized set of channels for file change subscriptions",
            "x-zui": {
              "title": "Files change subscription channels"
            }
          }
        },
        "required": ["filesChannelsCache"],
        "additionalProperties": false
      }
    }
  },
  "interfaces": {}
}

{
  "name": "googledrive",
  "version": "0.0.4",
  "title": "Google Drive",
  "description": "Access and manage your Google Drive files from your bot.",
  "events": {
    "fileCreated": {
      "title": "File Created",
      "description": "Triggered when a file is created in Google Drive",
      "schema": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "The ID of the Google Drive file",
            "minLength": 1
          },
          "name": {
            "type": "string",
            "description": "The name of the file",
            "minLength": 1
          },
          "parentId": {
            "type": "string",
            "minLength": 1
          },
          "mimeType": {
            "type": "string",
            "description": "The media type of the file",
            "minLength": 1
          },
          "size": {
            "type": "number",
            "description": "The size in bytes of the file",
            "minimum": 0
          },
          "path": {
            "type": "array",
            "description": "An array of the path's components sorted by level (root to leaf)",
            "items": {
              "type": "string",
              "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
              "minLength": 1
            }
          }
        },
        "required": [
          "id",
          "name",
          "mimeType",
          "size",
          "path"
        ]
      }
    },
    "fileDeleted": {
      "title": "File Deleted",
      "description": "Triggered when a file is deleted in Google Drive",
      "schema": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "The ID of the Google Drive file",
            "minLength": 1
          }
        },
        "required": [
          "id"
        ]
      }
    },
    "folderCreated": {
      "title": "Folder Created",
      "description": "Triggered when a folder is created in Google Drive",
      "schema": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "The ID of the Google Drive file",
            "minLength": 1
          },
          "name": {
            "type": "string",
            "description": "The name of the file",
            "minLength": 1
          },
          "parentId": {
            "type": "string",
            "minLength": 1
          },
          "mimeType": {
            "type": "string",
            "const": "application/vnd.google-apps.folder"
          },
          "path": {
            "type": "array",
            "description": "An array of the path's components sorted by level (root to leaf)",
            "items": {
              "type": "string",
              "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
              "minLength": 1
            }
          }
        },
        "required": [
          "id",
          "name",
          "mimeType",
          "path"
        ]
      }
    },
    "folderDeleted": {
      "title": "Folder Deleted",
      "description": "Triggered when a folder is deleted in Google Drive",
      "schema": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "The ID of the Google Drive file",
            "minLength": 1
          }
        },
        "required": [
          "id"
        ]
      }
    }
  },
  "actions": {
    "listFiles": {
      "title": "List Files",
      "description": "List files in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "nextToken": {
              "type": "string"
            }
          },
          "required": []
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {
            "items": {
              "type": "array",
              "description": "The list of items listed in Google Drive. Results may be paginated. If set, use nextToken to get additional results",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "The ID of the Google Drive file",
                    "minLength": 1
                  },
                  "name": {
                    "type": "string",
                    "description": "The name of the file",
                    "minLength": 1
                  },
                  "parentId": {
                    "type": "string",
                    "minLength": 1
                  },
                  "mimeType": {
                    "type": "string",
                    "description": "The media type of the file",
                    "minLength": 1
                  },
                  "size": {
                    "type": "number",
                    "description": "The size in bytes of the file",
                    "minimum": 0
                  },
                  "path": {
                    "type": "array",
                    "description": "An array of the path's components sorted by level (root to leaf)",
                    "items": {
                      "type": "string",
                      "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
                      "minLength": 1
                    }
                  }
                },
                "required": [
                  "id",
                  "name",
                  "mimeType",
                  "size",
                  "path"
                ]
              }
            },
            "meta": {
              "type": "object",
              "properties": {
                "nextToken": {
                  "type": "string"
                }
              },
              "required": []
            }
          },
          "required": [
            "items",
            "meta"
          ]
        }
      }
    },
    "listFolders": {
      "title": "List folders",
      "description": "List folders in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "nextToken": {
              "type": "string"
            }
          },
          "required": []
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {
            "items": {
              "type": "array",
              "description": "The list of items listed in Google Drive. Results may be paginated. If set, use nextToken to get additional results",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "The ID of the Google Drive file",
                    "minLength": 1
                  },
                  "name": {
                    "type": "string",
                    "description": "The name of the file",
                    "minLength": 1
                  },
                  "parentId": {
                    "type": "string",
                    "minLength": 1
                  },
                  "mimeType": {
                    "type": "string",
                    "const": "application/vnd.google-apps.folder"
                  },
                  "path": {
                    "type": "array",
                    "description": "An array of the path's components sorted by level (root to leaf)",
                    "items": {
                      "type": "string",
                      "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
                      "minLength": 1
                    }
                  }
                },
                "required": [
                  "id",
                  "name",
                  "mimeType",
                  "path"
                ]
              }
            },
            "meta": {
              "type": "object",
              "properties": {
                "nextToken": {
                  "type": "string"
                }
              },
              "required": []
            }
          },
          "required": [
            "items",
            "meta"
          ]
        }
      }
    },
    "createFile": {
      "title": "Create File",
      "description": "Create an empty file in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "The name of the file",
              "minLength": 1
            },
            "parentId": {
              "type": "string",
              "minLength": 1
            },
            "mimeType": {
              "type": "string",
              "description": "The media type of the file",
              "minLength": 1
            }
          },
          "required": [
            "name",
            "mimeType"
          ]
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "description": "The file created in Google Drive",
          "properties": {
            "id": {
              "type": "string",
              "description": "The ID of the Google Drive file",
              "minLength": 1
            },
            "name": {
              "type": "string",
              "description": "The name of the file",
              "minLength": 1
            },
            "parentId": {
              "type": "string",
              "minLength": 1
            },
            "mimeType": {
              "type": "string",
              "description": "The media type of the file",
              "minLength": 1
            },
            "size": {
              "type": "number",
              "description": "The size in bytes of the file",
              "minimum": 0
            },
            "path": {
              "type": "array",
              "description": "An array of the path's components sorted by level (root to leaf)",
              "items": {
                "type": "string",
                "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
                "minLength": 1
              }
            }
          },
          "required": [
            "id",
            "name",
            "mimeType",
            "size",
            "path"
          ]
        }
      }
    },
    "readFile": {
      "title": "Read File",
      "description": "Read a file's metadata in a Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "The ID of the Google Drive file",
              "minLength": 1
            }
          },
          "required": [
            "id"
          ]
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "description": "The file read from Google Drive",
          "properties": {
            "id": {
              "type": "string",
              "description": "The ID of the Google Drive file",
              "minLength": 1
            },
            "name": {
              "type": "string",
              "description": "The name of the file",
              "minLength": 1
            },
            "parentId": {
              "type": "string",
              "minLength": 1
            },
            "mimeType": {
              "type": "string",
              "description": "The media type of the file",
              "minLength": 1
            },
            "size": {
              "type": "number",
              "description": "The size in bytes of the file",
              "minimum": 0
            },
            "path": {
              "type": "array",
              "description": "An array of the path's components sorted by level (root to leaf)",
              "items": {
                "type": "string",
                "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
                "minLength": 1
              }
            }
          },
          "required": [
            "id",
            "name",
            "mimeType",
            "size",
            "path"
          ]
        }
      }
    },
    "updateFile": {
      "title": "Update File",
      "description": "Update a file's metadata in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "The ID of the Google Drive file",
              "minLength": 1
            },
            "name": {
              "type": "string",
              "description": "The name of the file",
              "minLength": 1
            },
            "parentId": {
              "type": "string",
              "minLength": 1
            }
          },
          "required": [
            "id",
            "name"
          ]
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "description": "The file updated in Google Drive",
          "properties": {
            "id": {
              "type": "string",
              "description": "The ID of the Google Drive file",
              "minLength": 1
            },
            "name": {
              "type": "string",
              "description": "The name of the file",
              "minLength": 1
            },
            "parentId": {
              "type": "string",
              "minLength": 1
            },
            "mimeType": {
              "type": "string",
              "description": "The media type of the file",
              "minLength": 1
            },
            "size": {
              "type": "number",
              "description": "The size in bytes of the file",
              "minimum": 0
            },
            "path": {
              "type": "array",
              "description": "An array of the path's components sorted by level (root to leaf)",
              "items": {
                "type": "string",
                "description": "A component of the path of the file. It corresponds to the name of one of it's parents.",
                "minLength": 1
              }
            }
          },
          "required": [
            "id",
            "name",
            "mimeType",
            "size",
            "path"
          ]
        }
      }
    },
    "deleteFile": {
      "title": "Delete File",
      "description": "Deletes a file in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "The ID of the Google Drive file",
              "minLength": 1
            }
          },
          "required": [
            "id"
          ]
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {},
          "required": []
        }
      }
    },
    "uploadFileData": {
      "title": "Upload file data",
      "description": "Upload data to a file in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "minLength": 1
            },
            "url": {
              "type": "string",
              "description": "The URL used to access the file whose content will be uploaded to Google Drive",
              "minLength": 1
            },
            "mimeType": {
              "type": "string",
              "minLength": 1
            }
          },
          "required": [
            "id",
            "url"
          ]
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {},
          "required": []
        }
      }
    },
    "downloadFileData": {
      "title": "Download file data",
      "description": "Download data from a file in Google Drive",
      "input": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "The ID of the Google Drive file whose content will be downloaded",
              "minLength": 1
            },
            "index": {
              "type": "boolean",
              "description": "Indicates if the file is to be indexed or not"
            }
          },
          "required": [
            "id",
            "index"
          ]
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {
            "bpFileId": {
              "type": "string",
              "description": "The Botpress file ID corresponding to the file that was uploaded from Google Drive to the Files API",
              "minLength": 1
            }
          },
          "required": [
            "bpFileId"
          ]
        }
      }
    },
    "syncChannels": {
      "title": "Sync Channels",
      "description": "Sync channels for file change subscriptions",
      "input": {
        "schema": {
          "type": "object",
          "properties": {},
          "required": []
        }
      },
      "output": {
        "schema": {
          "type": "object",
          "properties": {},
          "required": []
        }
      }
    }
  },
  "states": {
    "configuration": {
      "type": "integration",
      "schema": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "The refresh token to use to authenticate with Google. It gets exchanged for a bearer token",
            "x-zui": {
              "title": "Refresh token"
            }
          }
        },
        "required": [
          "refreshToken"
        ]
      }
    },
    "filesCache": {
      "type": "integration",
      "schema": {
        "type": "object",
        "properties": {
          "filesCache": {
            "type": "object",
            "description": "Map of known files",
            "additionalProperties": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "The ID of the Google Drive file",
                      "minLength": 1
                    },
                    "name": {
                      "type": "string",
                      "description": "The name of the file",
                      "minLength": 1
                    },
                    "parentId": {
                      "type": "string",
                      "minLength": 1
                    },
                    "mimeType": {
                      "type": "string",
                      "description": "The media type of the file",
                      "minLength": 1
                    },
                    "size": {
                      "type": "number",
                      "description": "The size in bytes of the file",
                      "minimum": 0
                    },
                    "type": {
                      "type": "string",
                      "const": "normal"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "mimeType",
                    "size",
                    "type"
                  ]
                },
                {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "The ID of the Google Drive file",
                      "minLength": 1
                    },
                    "name": {
                      "type": "string",
                      "description": "The name of the file",
                      "minLength": 1
                    },
                    "parentId": {
                      "type": "string",
                      "minLength": 1
                    },
                    "mimeType": {
                      "type": "string",
                      "const": "application/vnd.google-apps.folder"
                    },
                    "type": {
                      "type": "string",
                      "const": "folder"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "mimeType",
                    "type"
                  ]
                },
                {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "The ID of the Google Drive file",
                      "minLength": 1
                    },
                    "name": {
                      "type": "string",
                      "description": "The name of the file",
                      "minLength": 1
                    },
                    "parentId": {
                      "type": "string",
                      "minLength": 1
                    },
                    "mimeType": {
                      "type": "string",
                      "const": "application/vnd.google-apps.shortcut"
                    },
                    "type": {
                      "type": "string",
                      "const": "shortcut"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "mimeType",
                    "type"
                  ]
                }
              ],
              "x-zui": {
                "def": {
                  "typeName": "ZodDiscriminatedUnion",
                  "discriminator": "type"
                }
              }
            },
            "x-zui": {
              "title": "Files cache"
            }
          }
        },
        "required": [
          "filesCache"
        ]
      }
    },
    "filesChannelsCache": {
      "type": "integration",
      "schema": {
        "type": "object",
        "properties": {
          "filesChannelsCache": {
            "type": "object",
            "description": "Serialized set of channels for file change subscriptions",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "The ID of the channel",
                  "minLength": 1
                },
                "resourceId": {
                  "type": "string",
                  "description": "The ID of the watched resource (different from the file ID)",
                  "minLength": 1
                },
                "fileId": {
                  "type": "string",
                  "description": "The ID of the Google Drive file",
                  "minLength": 1
                }
              },
              "required": [
                "id",
                "resourceId",
                "fileId"
              ]
            },
            "x-zui": {
              "title": "Files change subscription channels"
            }
          }
        },
        "required": [
          "filesChannelsCache"
        ]
      }
    }
  },
  "interfaces": {}
}
